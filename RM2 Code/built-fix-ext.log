
  ___  ____  ____  ____  ____ ®
 /__    /   ____/   /   ____/      Stata 18.0
___/   /   /___/   /   /___/       BE—Basic Edition

 Statistics and Data Science       Copyright 1985-2023 StataCorp LLC
                                   StataCorp
                                   4905 Lakeway Drive
                                   College Station, Texas 77845 USA
                                   800-782-8272        https://www.stata.com
                                   979-696-4600        service@stata.com

Stata license: Single-user  perpetual
Serial number: 301806304604
  Licensed to: tate
               UGA

Notes:
      1. Stata is running in batch mode.
      2. Unicode is supported; see help unicode_advice.

. do built-fix-ext.do 

. ************************************************
. * built-fix.dta                                *
. * Author: Tate Mason - dmason27@uncc.edu       *
. * Date: Jan 19, 2024                           *
. ************************************************
. 
.         #delimit cr             
delimiter now cr
.         clear                           

.         clear all                       

.         set more off    

.         
.                 local rootPath "/Volumes/TD1/mason/housing/"

.                 
.                 local codePath "`rootPath'/RM2 Code/"

.                 local dataPath "`rootPath'/RM2-Data"

.                 local outputPath "`rootPath'/output/"

.         
. *************************************
. * Dropping NA's in builtyr/builtyr2 *
. *************************************
. 
.         use "`dataPath'/IPUMS-USA_Extension.dta", clear

.         
.         replace builtyr = . if builtyr == 0
(0 real changes made)

.         replace builtyr2 = . if builtyr2 == 0
(0 real changes made)

.         
.         gen yrbuilt = .
(30,675,965 missing values generated)

. 
. *************************************
. * Replacing and Formatting Codes    *
. *************************************           
.                 //Builtyr variable used from 1960-2000 in sample
.         replace yrbuilt = 65 if builtyr == 9
(999,714 real changes made)

.         replace yrbuilt = 55 if builtyr == 8
(453,847 real changes made)

.         replace yrbuilt = 45 if builtyr == 7
(797,532 real changes made)

.         replace yrbuilt = 35 if builtyr == 6
(1,130,388 real changes made)

.         replace yrbuilt = 25 if builtyr == 5
(1,242,057 real changes made)

.         replace yrbuilt = 15 if builtyr == 4
(1,118,235 real changes made)

.         replace yrbuilt = 8 if builtyr == 3
(539,927 real changes made)

.         replace yrbuilt = 3 if builtyr == 2
(526,092 real changes made)

.         replace yrbuilt = 1 if builtyr == 1
(150,644 real changes made)

.                 
.                 //Builtyr2 variable used 2010 and 2019 in sample
.                         //2010
.         replace yrbuilt = 1 if builtyr2 == 15 & year==2010 | builtyr2 == 14 & year == 2
> 010
(6,216 real changes made)

.         replace yrbuilt = 3 if builtyr2 == 13 & year == 2010 | builtyr2 == 12 & year ==
>  2010 |          builtyr2 == 11 & year == 2010 | builtyr2 == 10 & year == 2010
(71,009 real changes made)

.         replace yrbuilt = 8 if builtyr2 == 9 & year == 2010 | builtyr2 == 8 & year == 2
> 010
(93,226 real changes made)

.         replace yrbuilt = 15 if builtyr2 == 7 & year == 2010
(165,305 real changes made)

.         replace yrbuilt = 25 if builtyr2 == 6 & year == 2010
(161,678 real changes made)

.         replace yrbuilt = 35 if builtyr2 == 5 & year == 2010
(189,855 real changes made)

.         replace yrbuilt = 45 if builtyr2 == 4 & year == 2010
(134,959 real changes made)

.         replace yrbuilt = 55 if builtyr2 == 3 & year == 2010
(136,809 real changes made)

.         replace yrbuilt = 65 if builtyr2 == 2 & year == 2010 | builtyr2 == 1 & year == 
> 2010
(230,885 real changes made)

.                 
.                         //2019
.         replace yrbuilt = 1 if builtyr2 == 24 & year == 2019 | builtyr2 == 23 & year ==
>  2019
(8,597 real changes made)

.         replace yrbuilt = 3 if builtyr2 == 22 & year == 2019 | builtyr2 == 21 & year ==
>  2019 | builtyr2 == 20 & year == 2019 | builtyr2 == 19 & year == 2019
(40,715 real changes made)

.         replace yrbuilt = 8 if builtyr2 == 18 & year == 2019 | builtyr2 == 17 & year ==
>  2019 | builtyr2 == 16 & year == 2019 | builtyr2 == 15 & year == 2019 | builtyr2 == 14 
> & year == 2019
(38,990 real changes made)

.         replace yrbuilt = 15 if builtyr2 == 13 & year == 2019 | builtyr2 == 12 & year =
> = 2019 | builtyr2 == 11 & year == 2019 | builtyr2 == 10 & year == 2019 | builtyr2 == 9 
> & year == 2019 
(149,563 real changes made)

.         replace yrbuilt = 25 if builtyr2 == 7 & year == 2019 
(174,531 real changes made)

.         replace yrbuilt = 35 if builtyr2 == 6 & year == 2019
(167,074 real changes made)

.         replace yrbuilt = 45 if builtyr2 == 5 & year == 2019
(191,153 real changes made)

.         replace yrbuilt = 55 if builtyr2 == 4 & year == 2019
(134,107 real changes made)

.         replace yrbuilt = 65 if builtyr2 == 3 & year == 2019 | builtyr2 == 2 & year == 
> 2019 | builtyr2 == 1 & year == 2019
(357,746 real changes made)

.                 
.         
. *************************************
. * Formatting Bedrooms               *
. *************************************
.         gen newrooms = .
(30,675,965 missing values generated)

. 
.         replace bedrooms = . if bedrooms == 0
(0 real changes made)

.         replace newrooms = 0 if bedrooms == 1
(522,842 real changes made)

.         replace newrooms = 1 if bedrooms == 2
(2,979,096 real changes made)

.         replace newrooms = 2 if bedrooms == 3
(7,607,345 real changes made)

.         replace newrooms = 3 if bedrooms == 4
(12,822,028 real changes made)

.         replace newrooms = 4 if bedrooms == 5
(5,288,487 real changes made)

.         replace newrooms = 5 if bedrooms >= 6
(1,456,167 real changes made)

.         
. *************************************
. * Saving Dataset                    *
. *************************************   
.         save "`dataPath'/IPUMS-USA_Extension-correct.dta", replace
file /Volumes/TD1/mason/housing//RM2-Data/IPUMS-USA_Extension-correct.dta saved

.         
.         
.         
.         
. 
end of do-file
